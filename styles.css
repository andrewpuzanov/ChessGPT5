:root { --board-size: clamp(340px, 64vmin, 560px); --square: calc(var(--board-size) / 8); --anim-dur: 225ms; }
* { box-sizing: border-box; } body { margin: 0; padding: 20px; background: #0f172a; color: #e5e7eb; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
h1 { margin: 0 0 12px; font-size: 24px; font-weight: 800; } .ver { font-weight: 700; color: #94a3b8; font-size: 14px; margin-left: 6px; }
.app { max-width: calc(var(--board-size) + 60px); margin: 0 auto; } .topbar { display: grid; gap: 10px; margin-bottom: 12px; }
.status { padding: 10px 12px; background:#111827; border:1px solid #1f2937; border-radius:10px; font-weight:600; min-height: 42px; display:flex; align-items:center; }
.controls { display:flex; gap: 10px; align-items:center; flex-wrap: wrap; } button, select { font-size: 14px; }
button { padding: 8px 12px; border-radius:8px; border:1px solid #374151; background:#1f2937; color:#e5e7eb; cursor:pointer; } button:hover { background:#111827; }
select { padding: 6px 8px; border-radius:8px; border:1px solid #374151; background:#111827; color:#e5e7eb; }
.board-wrap{ position: relative; width: var(--board-size); margin: 0 auto; padding-bottom: 40px; }
.board{ width: var(--board-size); aspect-ratio: 1 / 1; border-radius: 10px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,.35);
  display: grid; grid-template-columns: repeat(8, 1fr); grid-template-rows: repeat(8, 1fr); position: relative;}
.square { width: 100%; height: 100%; display:flex; align-items:center; justify-content:center; user-select: none; position: relative; }
.square.dark { background: #3b4a68; } .square.light { background: #b8c2cf; }
.piece { font-size: calc(var(--square) * 0.66); line-height: 1; filter: drop-shadow(0 1px 1px rgba(0,0,0,.4)); cursor: pointer; transition: transform .08s ease-in-out; }
.piece:active { transform: scale(0.96); } .piece.white { color: #f8fafc; text-shadow: 0 0 1px rgba(0,0,0,0.35); }
.piece.black { color: #0b1220; text-shadow: 0 0 1px rgba(255,255,255,0.25); }
.square.highlight-origin { box-shadow: inset 0 0 0 3px #22c55e; } .square.highlight-move { box-shadow: inset 0 0 0 3px rgba(34,197,94,.65); }
.square.highlight-capture { box-shadow: inset 0 0 0 3px rgba(239,68,68,.8); } .square.highlight-check { box-shadow: inset 0 0 0 4px #ef4444; }
.square.highlight-attacker { box-shadow: inset 0 0 0 4px #f59e0b; }
.promo-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.45); display:flex; align-items:center; justify-content:center; }
.promo-dialog { width: 300px; background:#111827; border: 1px solid #1f2937; border-radius: 12px; padding: 16px; }
.promo-title { font-weight: 700; margin-bottom: 10px; } .promo-choices { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
.promo-choices button { padding: 10px 8px; } .hidden { display: none !important; }
.toast { position: fixed; left: 50%; bottom: 18px; transform: translateX(-50%); background:#111827; border:1px solid #1f2937; color:#e5e7eb; padding:10px 14px; border-radius:10px; font-size:13px; box-shadow:0 6px 20px rgba(0,0,0,.35); max-width:90vw; z-index:50 }
.toast.hidden { display: none !important; }
.files-axis { position: absolute; top: calc(100% - 30px); left: 0; width: 100%; display: grid; grid-template-columns: repeat(8, 1fr); font-size: 12px; color: #9ca3af; text-align: center; pointer-events: none; }
.ranks-axis { position: absolute; left: calc(-32px); top: 0; height: var(--board-size); width: 28px; display: grid; grid-template-rows: repeat(8, 1fr); font-size: 12px; color: #9ca3af; place-items: center; pointer-events: none; }
.legend { margin-top: 1px; color:#9ca3af; font-size: 12px; }
.drag-ghost{ position: fixed; z-index: 1000; pointer-events: none; transform: translate(-50%, -50%) scale(1.08); filter: drop-shadow(0 6px 10px rgba(0,0,0,.5));}
.anim-ghost{ position: fixed; z-index: 1000; pointer-events: none; transform: translate(-50%, -50%); transition: transform var(--anim-dur) ease; will-change: transform; filter: drop-shadow(0 6px 10px rgba(0,0,0,.5));}
@media (pointer: coarse), (max-width: 820px){ #fenBtn { display: none !important; } }
